/* Web server configuration */

/* Web server package */
package "nginx" {
  state = "installed"
}

/* Web service configuration */
service "nginx" {
  state = "running"
  enabled = true
  
  depends_on [
    package {"nginx"}
  ]
}

/* Web server directory */
file "/var/www/html" {
  state = "directory"
  
  when = {
    platform = ["linux", "darwin"]
  }
}

/* Default web page */
file "/var/www/html/index.html" {
  content = "<html><body><h1>Welcome to $app_name $app_version</h1></body></html>"
  
  depends_on [
    file {"/var/www/html"}
  ]
  
  when = {
    platform = ["linux", "darwin"]
  }
}